# Predicting Financial Toxicity Risk in Healthcare Revenue Cycle Management
## A Machine Learning Approach Using Synthetic EHR Data

[![License: MIT](https://img.shields.io/badge/License-MIT-blue.svg)](https://opensource.org/licenses/MIT)
[![Python 3.8+](https://img.shields.io/badge/python-3.8+-blue.svg)](https://www.python.org/downloads/)

---

## Research Overview

This project develops a machine learning framework to predict patient-level financial risk in healthcare settings, demonstrating how routinely collected electronic health record (EHR) data can be used to identify patients who may struggle with medical bill payment. Using synthetic patient data from Synthea, the analysis achieves a 9.4× improvement over random baseline in identifying high-risk patients through Random Forest classification.

**Research Significance:** The work addresses a critical gap in healthcare operations research by showing that clinical complexity markers already present in EHR systems can serve as early warning signals for financial hardship, enabling proactive intervention before debt becomes uncollectible. This represents a practical application of machine learning to healthcare workflow optimization.

**Key Finding:** Comorbidity burden emerged as the strongest predictor of payment default risk (permutation importance: 0.062), while traditionally assumed socioeconomic predictors showed minimal contribution. This finding suggests that ML-based risk scoring could be implemented using existing clinical documentation without requiring additional data collection or patient questionnaires.

---

## Problem Statement

Medical debt affects over 100 million Americans, with hospitals writing off billions annually in bad debt while patients face financial toxicity from healthcare costs. Traditional revenue cycle systems react to non-payment after it occurs, missing opportunities for early financial assistance that could benefit both patient welfare and institutional revenue recovery.

This research investigates whether machine learning models trained on basic EHR features can prospectively identify patients at high risk of payment default, enabling targeted intervention through financial counseling, payment plan enrollment, or charity care screening.

**Research Questions:**
1. Can routine EHR data predict patient-level financial risk with clinically meaningful accuracy?
2. Which patient characteristics drive financial toxicity risk in healthcare settings?
3. What are the methodological requirements for deploying such models in real healthcare workflows?

---

## Data and Methods

### Data Source

This analysis uses entirely **synthetic patient data generated by Synthea**, an open-source patient population simulator that creates structurally realistic but fictional electronic health records. No real patient information was used.

- **Population:** Kentucky, United States (1,701 synthetic patients)
- **Analysis cohort:** 186 patients with billing records
- **License:** Apache 2.0 (freely available, no restrictions)
- **Data tables:** Patient demographics, insurance claims, claim transactions, payer information, diagnoses

**Outcome Definition:** High-risk status defined as patients with payment ratio below 80% and outstanding balance exceeding $100, representing meaningful payment struggles requiring intervention.

For complete data documentation, see [`DATA_README.md`](DATA_README.md).

### Statistical Methods

The analysis follows standard machine learning workflow for healthcare risk prediction:

**Feature Engineering:** Patient-level aggregation of:
- Clinical complexity: Unique diagnosis count (comorbidity burden)  
- Socioeconomic indicators: Annual income
- Demographics: Age
- Insurance coverage: Binary indicator

**Modeling Approach:** Random Forest classifier with:
- Stratified 5-fold cross-validation for robust evaluation
- Balanced class weights to address 2.1% high-risk prevalence
- Hyperparameter optimization via grid search
- Precision-Recall metrics (appropriate for imbalanced classification)

**Feature Importance Analysis:** Dual methodology:
- Mean Decrease in Impurity (MDI): Tree-based importance
- Permutation importance: Actual predictive contribution measurement

Permutation importance was prioritized as it provides unbiased estimates of genuine predictive value, avoiding MDI's known bias toward high-cardinality continuous features.

### Evaluation Strategy

Model performance was assessed using Average Precision (area under Precision-Recall curve) rather than ROC-AUC, following best practices for severely imbalanced datasets. The baseline comparison uses prevalence (2.1%) as the expected performance of random classification.

---

## Results

### Model Performance

The optimized Random Forest achieved:
- **Cross-validated Average Precision:** 0.206 (vs. baseline 0.022)
- **Performance improvement:** 9.4-fold over random prediction  
- **Best F1 score:** 0.235 (after hyperparameter tuning, 61% improvement from baseline)

While these metrics appear modest in absolute terms, they represent meaningful signal extraction from a minimal feature set in a severely imbalanced prediction task. The model demonstrates capacity for risk stratification that could enable more efficient resource allocation than current practice.

### Feature Importance: The Comorbidity Finding

**Critical methodological insight:** MDI and permutation importance revealed starkly different feature rankings:

| Feature | MDI Importance | Permutation Importance |
|---------|---------------|----------------------|
| Comorbidity count | 0.354 | 0.062 (±0.046) |
| Income | 0.362 | 0.023 (±0.059) |
| Age | 0.267 | −0.050 (±0.032) |
| Insurance status | 0.017 | −0.001 (±0.003) |

**Key observations:**
- Only comorbidity count showed positive permutation importance, indicating genuine predictive contribution
- Income contribution was small relative to variance, suggesting limited reliable signal
- Age showed *negative* permutation importance, meaning its inclusion degraded model performance
- MDI substantially overestimated income and age importance (known bias toward continuous features)

**Interpretation:** Comorbidity burden drives financial risk through multiple pathways:
1. Higher deductible exposure from repeated care episodes
2. Greater care coordination complexity increasing cost accumulation  
3. Increased likelihood of disability affecting income stability

This finding aligns with financial toxicity literature emphasizing clinical complexity as a hardship driver, while contradicting the initial hypothesis that socioeconomic factors would dominate.

### Implications for Healthcare Operations

**Practical significance:** Comorbidity data is already captured in EHR systems through routine clinical documentation (ICD-10 codes). This enables risk scoring without:
- Additional patient questionnaires
- External data integration (credit scores, census data)
- Workflow disruption or data collection burden

**Operational application:** A simple rule flagging patients with 3+ active diagnoses would capture the majority of high-risk cases identified by the full model, offering a low-complexity implementation pathway for resource-limited settings.

---

## Limitations and Future Research Directions

### Study Limitations

**Synthetic data constraints:** Synthea generates structurally plausible but not behaviorally realistic financial data. The near-perfect payment ratios observed (78.2% of patients with 100% payment) do not reflect empirical medical debt patterns, limiting external validity.

**Class imbalance:** Only 36 high-risk patients (2.1% prevalence) limits statistical power and produces unstable performance estimates despite stratified cross-validation. Larger datasets would improve model stability.

**Constructed outcome:** The high-risk label is a modeling choice rather than observed default, limiting clinical interpretability. Real-world validation would require actual payment histories.

**Feature insufficiency:** Permutation importance revealing minimal feature contribution suggests the feature set may be inadequate for robust prediction. Real-world deployment would benefit from richer features including:
- Prior payment history and payment plan enrollment
- Social determinants of health (housing instability, transportation access)
- Neighborhood-level socioeconomic indicators
- Payer contract terms and coverage gaps

### Connections to Future Research

This work demonstrates **proof of concept** for ML-based financial risk prediction using EHR data, but several research directions remain unexplored:

**Methodological extensions:**
- Cost-sensitive learning approaches that weight false negatives differently than false positives
- Threshold optimization balancing intervention costs against revenue recovery
- Time-varying risk models that update predictions as new clinical encounters occur
- Fairness audits examining disparate impact across demographic groups

**Healthcare operations applications:**
- Integration with existing charity care eligibility workflows
- A/B testing of proactive financial counseling interventions  
- Revenue cycle optimization through automated risk scoring
- Population health management resource allocation

**Dissertation potential:** This project could serve as a foundation for dissertation work investigating "ML for Healthcare Operational Workflow Optimization" - extending the EHR-based prediction framework to other operational decisions such as appointment scheduling, care coordination, or resource allocation. The synthetic data approach demonstrated here could be combined with real de-identified EHR data under appropriate research ethics approvals.

---

## Reproducibility

### Quick Start

All code and documentation are provided for complete reproducibility:

```bash
# Clone repository
git clone https://github.com/riyashet-hds/healthcare-ftr-prediction.git
cd healthcare-ftr-prediction

# Create virtual environment
python -m venv venv
source venv/bin/activate  # On Windows: venv\Scripts\activate

# Install dependencies
pip install -r requirements.txt

# Run analysis notebook
jupyter notebook notebooks/ftr_analysis_complete.ipynb
```

The complete analysis executes in approximately 2-3 minutes on a standard laptop.

### Environment Specifications

- Python 3.8 or higher
- Key packages: pandas, numpy, scikit-learn, matplotlib, seaborn
- Complete package list with pinned versions: `requirements.txt`
- Conda environment specification: `environment.yml`

### Code Organization

```
├── README.md                          # This file
├── DATA_README.md                     # Data documentation
├── LICENSE                            # MIT License
├── requirements.txt                   # Python dependencies
├── notebooks/
│   └── ftr_analysis_complete.ipynb   # Complete analysis with narrative
├── reports/
│   ├── one_page_case_study.md        # Executive summary
│   └── technical_walkthrough.md      # Code explanation guide
└── examples/
    └── (synthetic datasets for demo)
```

---

## Research Translation & Policy Implications

While this analysis used synthetic data and focused on methodological demonstration, the framework has potential applications in real healthcare settings:

**For Healthcare Systems:**
- Automated risk flagging at registration or billing workflows
- Targeted financial counseling for high-comorbidity patients
- Charity care screening integrated with clinical documentation

**For Health Policy:**
- Evidence for financial assistance program targeting criteria
- Data-driven resource allocation for patient navigation services
- Integration of social needs screening with clinical care

**For Research Community:**
- Reusable framework for EHR-based prediction model development
- Demonstration of Synthea utility for healthcare operations research
- Template for responsible ML deployment considering fairness and bias

**Ethical Considerations:** Any real-world deployment must address:
- Algorithmic fairness across demographic groups (race, ethnicity, gender)
- Transparency in automated decision-making affecting patient finances
- Right to appeal or override model-based decisions
- Potential for reinforcing existing healthcare disparities

---

## Project Provenance

**Author:** Riya Shet  
**Affiliation:** MSc Health Data Science, University of Birmingham  
**Date:** January 2026  
**Status:** Completed coursework project; methods ready for extension to real-world data

**Research Interests:** Machine learning for healthcare operations optimization, EHR-based prediction systems, health economics

**Seeking:** Dissertation supervisor for related research in ML applications to healthcare workflows

---

## License and Citation

**Code:** MIT License - freely available for academic and commercial use  
**Documentation:** Creative Commons Attribution 4.0 International (CC BY 4.0)

**Suggested Citation:**
```
Shet, R. (2026). Predicting Financial Toxicity Risk in Healthcare Revenue Cycle Management: 
A Machine Learning Approach Using Synthetic EHR Data. 
GitHub repository: https://github.com/riyashet-hds/healthcare-ftr-prediction
```

**Acknowledgments:** This work uses synthetic patient data from the Synthea™ project (Walonoski et al., 2018, *JAMIA*).

---

## Contact

**Riya Shet**  
MSc Health Data Science Student  
University of Birmingham  

GitHub: [@riyashet-hds](https://github.com/riyashet-hds)  
LinkedIn: [linkedin.com/in/riyashet](https://www.linkedin.com/in/riyashet)

**Open to:**
- Dissertation supervision in ML for healthcare operations
- Research collaborations in health data science
- Discussions about EHR-based prediction systems

---

**Repository Status:** Active | Last updated: February 2026
